(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t.n(a),u=t(16),o=t.n(u),i=t(17),s=t(3),l=function(e){var n=e.value,t=e.onChange;return Object(c.jsxs)("div",{children:["filter shown with:",Object(c.jsx)("input",{style:{marginLeft:"0.5em"},value:n,onChange:t})]})},d=function(e){return Object(c.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleChangeName})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleChangeNumber})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.persons,t=e.handleDestroy;return Object(c.jsx)("ul",{children:n.map((function(e){return Object(c.jsxs)("li",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.name)}))})},j=t(4),h=t.n(j),f="/api/persons",m=function(e){return h.a.get("".concat(f,"/").concat(e))},O=function(){return h.a.get(f)},p=function(e){return h.a.post(f,e)},g=function(e,n){return h.a.put("".concat(f,"/").concat(e),n)},x=function(e){return h.a.delete("".concat(f,"/").concat(e))},v=(t(40),function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),o=Object(s.a)(u,2),j=o[0],h=o[1],f=Object(a.useState)(""),v=Object(s.a)(f,2),w=v[0],y=v[1],C=Object(a.useState)(""),S=Object(s.a)(C,2),N=S[0],k=S[1],D=Object(a.useState)(!0),L=Object(s.a)(D,2),T=L[0],E=L[1],J=Object(a.useState)(null),A=Object(s.a)(J,2),B=A[0],I=A[1],M=Object(a.useState)(null),P=Object(s.a)(M,2),W=P[0],q=P[1],z=function(e,n){I(e),q(n),setTimeout((function(){I(null),q(null)}),5e3)},F=function(e){var n=e.message,t=e.type;return null===n?null:Object(c.jsx)("div",{className:t,children:Object(c.jsx)("p",{children:n})})};Object(a.useEffect)((function(){O().then((function(e){r(e.data)}))}),[]);var G=T?t:t.filter((function(e){return e.name.toLowerCase().startsWith(j.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(F,{message:B,type:W}),Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(l,{value:j,onChange:function(e){h(e.target.value),console.log(j),e.target.value.length>0?E(!1):E(!0)}}),Object(c.jsx)("h3",{style:{marginTop:"2em"},children:"add new number"}),Object(c.jsx)(d,{onSubmit:function(e){if(e.preventDefault(),""===w||""===N)return z("make an effort, fill the form","error");var n=t.find((function(e){return e.name===w}));n?window.confirm("".concat(w," already exist in the db, wanna replace the old number by the new one?"))&&g(n.id,{name:w,number:N}).then((function(e){r(t.map((function(t){return t.id===n.id?e.data:t}))),z("".concat(w," has been updated."),"success")})):p({name:w,number:N}).then((function(e){r([].concat(Object(i.a)(t),[{name:w,number:N}])),y(""),k(""),z("succesfully added.","success")})).catch((function(e){return z("error while creating this user in db","error")}))},newName:w,handleChangeName:function(e){y(e.target.value)},newNumber:N,handleChangeNumber:function(e){k(e.target.value)}}),Object(c.jsx)("h3",{style:{marginTop:"2em"},children:"Contacts"}),Object(c.jsx)(b,{persons:G,handleDestroy:function(e){m(e).then((function(n){window.confirm("Are you sure you wanna delete ".concat(n.data.name))&&x(e).then((function(){r(t.filter((function(n){return n.id!==e}))),z("sucessfully deleted.","success")})).catch((function(e){e.response?404===e.response.status&&z("".concat(n.data.name," has already been deleted."),"error"):z("failed to delete ".concat(n.data.name),"error")}))})).catch((function(e){z("wth are doing?","error")}))}})]})});o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.64da436a.chunk.js.map