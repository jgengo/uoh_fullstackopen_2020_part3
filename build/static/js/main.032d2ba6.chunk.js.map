{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Filter","value","onChange","style","marginLeft","PersonForm","props","onSubmit","newName","handleChangeName","newNumber","handleChangeNumber","type","Persons","persons","handleDestroy","map","person","name","number","onClick","id","baseUrl","axios","get","data","post","put","delete","App","useState","setPersons","search","setSearch","setNewName","setNewNumber","showAll","setShowAll","errorMessage","setErrorMessage","errorType","setErrorType","notify","message","setTimeout","Flash","className","useEffect","personService","then","res","personsToShow","filter","toLowerCase","startsWith","e","target","console","log","length","marginTop","event","preventDefault","existingUser","find","p","window","confirm","catch","err","response","error","_res","status","_noob","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.032d2ba6.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = ({value, onChange}) => {\n    return (\n        <div>\n            filter shown with: \n            <input style={{marginLeft: 0.5 + 'em'}} value={value} onChange={onChange} />\n        </div>\n    )\n}\n\n\n\nexport default Filter;","import React from 'react'\n\n\nconst PersonForm = (props) => {\n    return (\n        <form onSubmit={props.onSubmit}>\n            <div>name: <input value={props.newName} onChange={props.handleChangeName} /></div>\n            <div>number: <input value={props.newNumber} onChange={props.handleChangeNumber} /></div>\n            <div><button type=\"submit\">add</button></div>\n        </form>\n    )\n}\n\nexport default PersonForm;","import React from 'react'\n\nconst Persons = ({persons, handleDestroy}) => {\n    return (\n        <ul>\n            {persons.map( person => <li key={person.name}>{person.name} {person.number} <button onClick={() => handleDestroy(person.id)}>delete</button></li>)}\n        </ul>\n    )\n    \n}\n\nexport default Persons","import axios from 'axios';\nconst baseUrl = '/api/persons'\n\nconst get = (id) => {\n    return axios.get(`${baseUrl}/${id}`)\n}\n\nconst getAll = () => {\n    return axios.get(baseUrl);\n}\n\nconst destroy = (id) => {\n    return axios.delete(`${baseUrl}/${id}`);\n}\n\nconst create = (data) => { \n    return axios.post(baseUrl, data);\n} \n\nconst update = (id, data) => {\n    return axios.put(`${baseUrl}/${id}`, data);\n}\n\nexport default {\n    get: get,\n    getAll: getAll,\n    create: create,\n    update: update,\n    destroy: destroy\n}","import React, { useState, useEffect } from 'react';\n\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\n\nimport personService from './services/persons'\n\nimport './index.css'\n\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([])\n  const [ search, setSearch ] = useState('')\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ showAll, setShowAll ] = useState(true)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const [ errorType, setErrorType ] = useState(null)\n\n  const notify = (message, type) => {\n    setErrorMessage(message)\n    setErrorType(type)\n    setTimeout(() => {\n      setErrorMessage(null)\n      setErrorType(null)\n    }, 5000)\n  }\n\n  const Flash = ({message, type}) => {\n    if (message === null) {\n      return null\n    }\n\n    return (\n      <div className={type}>\n        <p>{message}</p>\n      </div>\n    )\n\n  }\n\n  useEffect( () => {\n    personService\n      .getAll()\n      .then( (res) => {\n        setPersons(res.data)\n      })\n\n  }, [])\n\n  const personsToShow = showAll\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().startsWith(search.toLowerCase()))\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    if (newName === '' || newNumber === '')\n      return notify('make an effort, fill the form', 'error');\n\n    const existingUser = persons.find( p => p.name === newName)\n    if (existingUser) {\n      if (window.confirm(`${newName} already exist in the db, wanna replace the old number by the new one?`)) {\n        personService\n        .update(existingUser.id, {name: newName, number: newNumber})\n        .then( (res) => {\n          setPersons(\n            persons.map ( (person) => person.id === existingUser.id ? res.data : person)\n          )\n          notify(`${newName} has been updated.`, 'success');\n        })\n        .catch( (err) => notify(err.response.data.error, 'error'))\n        }\n      } else {\n      personService\n      .create({name: newName, number: newNumber})\n      .then( (_res) => { \n        setPersons([...persons, {name: newName, number: newNumber}])\n        setNewName('')\n        setNewNumber('')\n        notify(\"succesfully added.\", \"success\")\n      })\n      .catch( (err) => notify(err.response.data.error, 'error') )\n    }\n  }\n\n  const handleSearch = (e) => {\n    setSearch(e.target.value)\n    console.log(search)\n    e.target.value.length > 0 ? setShowAll(false) : setShowAll(true)\n  }\n\n  const handleDestroy = (id) => {\n    personService\n    .get(id)\n    .then( (res) => {\n      if (window.confirm(`Are you sure you wanna delete ${res.data.name}`))\n      {\n        personService\n        .destroy(id)\n        .then( () => {\n          setPersons(persons.filter( (person) => person.id !== id ));\n          notify('sucessfully deleted.', 'success')\n        })\n        .catch( (err) => {\n          if (err.response) {\n            if (err.response.status === 404) notify(`${res.data.name} has already been deleted.`, \"error\");\n          } else {\n            notify(`failed to delete ${res.data.name}`, 'error')\n          }\n        })\n      }\n    })\n    .catch( (_noob) => {\n      notify('wth are doing?', 'error')\n    })\n  }\n\n  const handleChangeName = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleChangeNumber = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  return (\n    \n    <div>\n      <Flash message={errorMessage} type={errorType} />\n      <h1>Phonebook</h1>\n      <Filter value={search} onChange={handleSearch} />\n      <h3 style={{marginTop: 2 + \"em\"}}>add new number</h3>\n      <PersonForm \n        onSubmit={addPerson}\n        newName={newName}\n        handleChangeName={handleChangeName}\n        newNumber={newNumber}\n        handleChangeNumber={handleChangeNumber}\n      />\n      <h3 style={{marginTop: 2 + \"em\"}}>Contacts</h3>\n      <Persons persons={personsToShow} handleDestroy={handleDestroy} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}